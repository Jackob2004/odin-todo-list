(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],d=r.base?c[0]+r.base:c[0],l=a[d]||0,u="".concat(d," ").concat(l);a[d]=l+1;var p=n(u),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var E=o(m,r);r.byIndex=s,t.splice(s,0,{identifier:u,updater:E,references:1})}i.push(u)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=n(a[i]);t[s].references--}for(var c=r(e,o),d=0;d<a.length;d++){var l=n(a[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=c}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);r&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},365:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,':root {\n    --pallete-dark: #181C14;\n    --pallete-gray: #3C3D37;\n    --pallete-green: #697565;\n    --pallete-cream: #ECDFCC;\n\n    --card-shadow: 4px 8px 8px #0000006D;\n    --card-border-radius: 10px;\n\n    --shared-gap: 1rem;\n}\n\nbody {\n    display: grid;\n    grid-template-columns: 250px 2fr 1fr;\n\n    position: relative;\n    min-height: 100vh;\n    background: linear-gradient(0deg, rgba(24, 28, 20, 1) 0%, rgba(105, 117, 101, 1) 100%) fixed;\n    font-family: Verdana, sans-serif;\n}\n\n/* sidebar and its contents */\n#sidebar {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 100px;\n\n    padding: var(--shared-gap);\n    border: 1px solid var(--pallete-cream);\n}\n\n#add-actions {\n    text-align: center;\n}\n\n#add-actions div {\n    display: flex;\n    flex-direction: column;\n    gap: var(--shared-gap);\n\n    margin-top: 1rem;\n    padding: var(--shared-gap);\n    border-radius: var(--card-border-radius);\n    border-top: 3px solid var(--pallete-cream);\n}\n\n#add-actions button {\n    padding: 1rem 2rem;\n}\n\n/* top info bar*/\n#projects-info {\n    text-align: center;\n}\n/* main section and its different variations */\nmain {\n    display: grid;\n    grid-template-rows: auto 1fr auto;\n}\n\n#projects-container {\n    display: grid;\n    gap: var(--shared-gap);\n\n    padding: var(--shared-gap);\n}\n\n.projects {\n    grid-template-columns: repeat(auto-fit, 250px);\n    grid-auto-rows: minmax(300px, 50%);\n}\n\n.tasks {\n    grid-auto-rows: 130px;\n}\n\n.notes {\n    grid-template-columns: repeat(auto-fit, 500px);\n    grid-auto-rows: 300px;\n}\n/* projects navigator and its contents*/\n#project-navigator {\n    position: sticky;\n    bottom: 0;\n}\n\n#project-navigator > div {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n#btn-back {\n    width: 120px;\n    margin: 15px;\n    padding: 5px;\n}\n\n#btn-back:disabled {\n    opacity: 0.2;\n}\n\n#pager {\n    display: flex;\n    flex-wrap: wrap;\n    gap: var(--shared-gap);\n    align-items: center;\n    justify-content: space-between;\n\n    width: 50%;\n    padding: 0 8px;\n    border: 1px solid var(--pallete-cream);\n}\n\n#pager-controls{\n    display: flex;\n    align-items: center;\n}\n\n#pager-controls button {\n    padding: 5px;\n    border: none;\n    background-color: transparent;\n    color: var(--pallete-cream);\n    font-size: 2rem;\n}\n\n#pager-controls button:hover {\n    color: #b2a79b;\n}\n\n#total-items,\n#curr-page{\n    font-style: italic;\n}\n/* shared card styles */\n.card {\n    padding: var(--shared-gap);\n    border-radius: var(--card-border-radius);\n    background-color: var(--pallete-gray);\n    color: var(--pallete-cream);\n}\n\n.card:hover {\n    box-shadow: var(--card-shadow);\n}\n\n.card button {\n    width: 2rem;\n    height: 1rem;\n    border: none;\n    background-color: transparent;\n    visibility: hidden;\n}\n\n.card:hover button {\n    visibility: visible;\n}\n\n.card:hover button:hover {\n    opacity: 0.8;\n}\n/* different card types */\n.project-card {\n    display: grid;\n    grid-template-columns: 1fr auto;\n}\n\n.project-card h3 {\n    height: min-content;\n    width: min-content;\n    border-bottom: 3px solid var(--pallete-green);\n}\n\n.project-card > div {\n    align-items: center;\n    justify-self: center;\n    grid-column: 1 / 3;\n\n    display: flex;\n    flex-direction: column;\n    gap: var(--shared-gap);\n}\n/* priority levels */\n.low {\n    --color: #69ce5e;\n}\n\n.medium {\n    --color: #cebf5e;\n}\n\n.high {\n    --color: #d36161;\n}\n\n.urgent {\n    --color: #9861d3;\n}\n\n/* different task statues */\n\n.done {\n    text-decoration: line-through;\n}\n\n.in-progress {\n    text-decoration: underline;\n}\n\n.task-card {\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    align-items: center;\n    border-left: 5px solid var(--color);\n}\n\n.task-card div {\n    justify-self: end;\n}\n\n.task-card p {\n    justify-self: center;\n}\n\n.task-card select {\n    justify-self: center;\n}\n\n.note-card {\n    display: grid;\n    grid-template-columns: 1fr auto;\n    gap: var(--shared-gap);\n}\n\n.note-card *:not(div) {\n    justify-self: center;\n    grid-column: 1 / 3;\n}\n\n.note-card h3 {\n    width: 90%;\n    height: 3rem;\n    text-align: center;\n    border-bottom: 5px dashed var(--pallete-green);\n}\n\n.note-card p {\n    width: 90%;\n    overflow: hidden;\n    text-overflow: clip;\n}\n\n.note-card div {\n    grid-column: 2 / 3;\n    align-self: end;\n}\n/* shared modals styles */\ndialog {\n    margin: auto;\n    padding: var(--shared-gap);\n    border: 5px dashed var(--pallete-green);\n    border-radius: var(--card-border-radius);\n    background-color: var(--pallete-dark);\n    color: var(--pallete-cream);\n}\n/* colors symbolizing different actions */\n.add {\n    color: #75e139;\n}\n\n.delete {\n    color: #e13939;\n}\n\n.edit {\n    color: #39e1db;\n}\n\ndialog form {\n    display: grid;\n    gap: var(--shared-gap);\n}\n\ndialog h3,\ndialog:not(.view-window) p:first-of-type {\n    margin-bottom: 1.2rem;\n}\n\ndialog label {\n    margin-right: 0.5rem;\n}\n\ndialog input,\ndialog textarea {\n    padding: 5px 10px;\n    border: none;\n    background-color: var(--pallete-cream);\n    border-radius: var(--card-border-radius);\n}\n\ndialog input:focus,\ndialog textarea:focus {\n    outline: 3px dotted var(--pallete-cream);\n    outline-offset: 3px;\n}\n\ndialog div {\n    justify-self: center;\n    display: flex;\n    gap: var(--shared-gap);\n\n    margin-top: 1rem;\n}\n\ndialog button {\n    padding: 5px 10px;\n}\n\ndialog form  p {\n    display: flex;\n    align-items: center;\n}\n\ndialog label {\n    text-align: right;\n    width: 120px;\n    padding-right: 20px;\n}\n\ntextarea, input[type="text"], input[type="date"] {\n    box-shadow: 1px 1px 1px #999999;\n}\n/*  styles for view tasks/notes modals */\n.view-window {\n    width: 600px;\n    height: 300px;\n    border: 10px ridge var(--pallete-green);\n\n    overflow: auto;\n    scrollbar-color: var(--pallete-cream) var(--pallete-dark);\n    scrollbar-width: thin;\n}\n\n.view-window span {\n    display: inline-block;\n    color: var(--pallete-cream);\n}\n\n.view-window  p {\n    margin-bottom: 1rem;\n    color: var(--pallete-green);\n}\n/* sorting/filtering right panel */\n#tasks-sorter {\n    position: sticky;\n    top: 15px;\n}\n\n#tasks-sorter ul {\n    margin-left: 1rem;\n}\n/* options with radio inputs pager/filtering/sorting */\n.options {\n    padding: var(--shared-gap);\n    border: 1px solid var(--pallete-cream);\n    height: min-content;\n}\n\n.options fieldset {\n    padding: var(--shared-gap);\n    border: 4px solid var(--pallete-green);\n}\n\n.options fieldset:first-child {\n    margin-bottom: 1rem;\n}\n\n.options legend {\n    padding: 2px 4px;\n    font-weight: bold;\n    background-color: var(--pallete-gray);\n    border-radius: var(--card-border-radius);\n}\n\n#items-options div {\n    display: flex;\n    flex-wrap: wrap;\n    gap: var(--shared-gap);\n}\n/* other shared styles */\n.basic-section {\n    margin: 15px;\n    background-color: var(--pallete-dark);\n    color: var(--pallete-cream);\n    border-radius: 20px;\n}\n\n.basic-btn {\n    border: none;\n    border-radius: 12px;\n    background-color: var(--pallete-green);\n    color: var(--pallete-cream);\n    font-weight: bold;\n}\n\n.basic-btn:hover:enabled {\n    background-color: #5a6457;\n}',""]);const s=i},430:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,"/*\n  Modified: removed declarations that would be of no use in this project\n  Josh's Custom CSS Reset\n  https://www.joshwcomeau.com/css/custom-css-reset/\n*/\n\n/* Use a more-intuitive box-sizing model */\n*, *::before, *::after {\n    box-sizing: border-box;\n}\n\n/* Remove default margin */\n* {\n    margin: 0;\n    padding: 0;\n}\n\nbody {\n    /* Add accessible line-height */\n    line-height: 1.5;\n    /* Improve text rendering */\n    -webkit-font-smoothing: antialiased;\n}\n\n/* Improve media defaults */\nimg, picture, video, canvas, svg {\n    display: block;\n    max-width: 100%;\n}\n\n/* Inherit fonts for form controls */\ninput, button, textarea, select {\n    font: inherit;\n}\n\n/* Avoid text overflows */\np, h1, h2, h3, h4, h5, h6 {\n    overflow-wrap: break-word;\n}\n\n/* Improve line wrapping */\np {\n    text-wrap: pretty;\n}\nh1, h2, h3, h4, h5, h6 {\n    text-wrap: balance;\n}",""]);const s=i},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.nc=void 0;var r=n(72),o=n.n(r),a=n(825),i=n.n(a),s=n(659),c=n.n(s),d=n(56),l=n.n(d),u=n(540),p=n.n(u),m=n(113),E=n.n(m),g=n(430),f={};f.styleTagTransform=E(),f.setAttributes=l(),f.insert=c().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=p(),o()(g.A,f),g.A&&g.A.locals&&g.A.locals;var h=n(365),v={};v.styleTagTransform=E(),v.setAttributes=l(),v.insert=c().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=p(),o()(h.A,v),h.A&&h.A.locals&&h.A.locals;class b{constructor(e){this.name=e}static fromString(e){const t=Object.values(this).find(t=>t.name===e);if(!t)throw new Error(`Invalid enum value: ${e}`);return t}toJSON(){return this.name}}class T extends b{static LOW=new T("Low",1,"low");static MEDIUM=new T("Medium",2,"medium");static HIGH=new T("High",3,"high");static URGENT=new T("Urgent",4,"urgent");constructor(e,t,n){super(e),this.priorityLevel=t,this.style=n}}class y extends b{static NOT_STARTED=new y("Not Started",1,"not-started");static IN_PROGRESS=new y("In Progress",2,"in-progress");static DONE=new y("Done",3,"done");constructor(e,t,n){super(e),this.statusLevel=t,this.style=n}}const w="localStorage";function S(e){let t;try{t=window[e];const n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&"QuotaExceededError"===e.name&&t&&0!==t.length}}function D(e){return!!S(w)&&(localStorage.setItem(e.id,JSON.stringify(function(e){return{title:e.title,tasks:Array.from(e.tasks.entries()),notes:Array.from(e.notes.entries()),id:e.id}}(e))),k(),!0)}function k(){if(!S(w))return null;if(0===localStorage.length)return null;const e={...localStorage};return Object.values(e).map(e=>function(e){const t=e.tasks.map(([e,t])=>[e,{...t,dueDate:new Date(t.dueDate),priority:T.fromString(t.priority),status:y.fromString(t.status)}]);return{title:e.title,tasks:new Map(t),notes:new Map(e.notes),id:e.id}}(JSON.parse(e)))}function x(e){const t=crypto.randomUUID();return{title:e,tasks:new Map,notes:new Map,id:t}}const _=new Map;let C=null;const I="Failed to save task. In-memory state has been reverted";function A(e){return!!e&&!!D(e)&&(_.set(e.id,e),!0)}function O(e){if(!function(e){return!!S(w)&&(localStorage.removeItem(e),!0)}(e))return!1;const t=_.delete(e);return t&&e===C&&(C=null),t}function N(e){if(!_.has(C))return!1;const t=_.get(C),n=t.tasks.get(e);return!!n&&(t.tasks.delete(e),!!D(t)||(t.tasks.set(e,n),console.error(I),!1))}function R(e){if(!_.has(C))return!1;const t=_.get(C),n=t.notes.get(e);return!!n&&(t.notes.delete(e),!!D(t)||(t.notes.set(e,n),console.error(I),!1))}function L(e=C){return _.has(e)?_.get(e).title:null}function q(e){if(!_.has(C))return null;const t=_.get(C).tasks.get(e);return t?t.title:null}function j(e){if(!_.has(C))return null;const t=_.get(C).notes.get(e);return t?t.title:null}function P(){return C}function U(){return Array.from(_,([e,t])=>({title:t.title,tasks:t.tasks.size,notes:t.notes.size,id:e}))}function V(){return _.has(C)?Array.from(_.get(C).tasks,([e,t])=>({title:t.title,dueDate:t.dueDate,status:t.status,priority:t.priority,id:e})):null}function W(){return _.has(C)?Array.from(_.get(C).notes.values()):null}function K(e){if(!_.has(C))return null;const t=_.get(C).tasks.get(e);return t?{title:t.title,description:t.description,dueDate:t.dueDate,priority:t.priority,trackable:t.trackable}:null}function J(e){if(!_.has(C))return null;return _.get(C).notes.get(e)||null}const M=new class{constructor(){this.events=new Map}subscribe(e,t){this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t)}unsubscribe(e,t){this.events.has(e)&&this.events.set(e,this.events.get(e).filter(e=>e!==t))}publish(e,t){this.events.has(e)&&this.events.get(e).forEach(e=>e(t))}};class Q extends b{static PROJECT_CREATED=new Q("Project Create");static TASK_CREATED=new Q("Task Create");static NOTE_CREATED=new Q("Note Create");static PROJECT_DELETE_REQUESTED=new Q("Project Delete Request");static PROJECT_DELETED=new Q("Project Delete");static TASK_DELETE_REQUESTED=new Q("Task Delete Request");static TASK_DELETED=new Q("Task Delete");static NOTE_DELETE_REQUESTED=new Q("Note Delete Request");static NOTE_DELETED=new Q("Note Delete");static NOTE_EDIT_REQUESTED=new Q("Note Edit Request");static NOTE_EDITED=new Q("Note Edit");static TASK_EDIT_REQUESTED=new Q("Task Edit Request");static TASK_EDITED=new Q("Task Edit");static TASK_VIEW_REQUESTED=new Q("Task View Request");static NOTE_VIEW_REQUESTED=new Q("Task View Request")}const F=document.querySelector("#add-actions"),H=document.querySelector("#add-project-window"),z=document.querySelector("#add-project-window form"),G=document.querySelector("#add-task-window"),$=document.querySelector("#add-task-window form"),B=document.querySelector("#task-project-select"),Y=document.querySelector("#add-note-window"),X=document.querySelector("#add-note-window form"),Z=document.querySelector("#note-project-select");function ee(){const e=document.createDocumentFragment(),t=P();if(t){const n=document.createElement("option");n.value=t,n.textContent="[Current Project] "+L(),e.appendChild(n)}for(const n of U()){if(t===n.id)continue;const r=document.createElement("option");r.value=n.id,r.textContent=n.title,e.appendChild(r)}return e}F.addEventListener("click",e=>{switch(e.target.id){case"add-project":z.reset(),H.showModal();break;case"add-task":!function(){$.reset();const e=(new Date).toISOString().split("T")[0];$.date.value=e,$.date.min=e,B.replaceChildren(ee()),G.showModal()}();break;case"add-note":X.reset(),Z.replaceChildren(ee()),Y.showModal()}}),document.querySelector("#add-project-window button[type='button']").onclick=()=>H.close(),z.addEventListener("submit",function(){const e=x(new FormData(z).get("title"));A(e)&&M.publish(Q.PROJECT_CREATED,e)}),document.querySelector("#add-task-window button[type='button']").onclick=()=>G.close(),$.addEventListener("submit",function(){const e=new FormData($),t=e.get("project"),n=e.get("title"),r=e.get("description"),o=new Date(""+e.get("date")),a=T.fromString(e.get("priority")),i="on"===e.get("track"),s=function(e,t,n,r,o,a){return{title:e,description:t,dueDate:n,priority:r,status:o,trackable:a,id:crypto.randomUUID()}}(n,r,o,a,y.NOT_STARTED,i);(function(e,t=C){if(!_.has(t)||!e)return!1;const n=_.get(t);return n.tasks.set(e.id,e),!!D(n)||(n.tasks.delete(e.id),console.error(I),!1)})(s,t)&&M.publish(Q.TASK_CREATED,{task:s,projectId:t})}),document.querySelector("#add-note-window button[type='button']").onclick=()=>Y.close(),X.addEventListener("submit",function(){const e=new FormData(X),t=e.get("project"),n=function(e,t){return{title:e,content:t,id:crypto.randomUUID()}}(e.get("title"),e.get("description"));(function(e,t=C){if(!_.has(t)||!e)return!1;const n=_.get(t);return n.notes.set(e.id,e),!!D(n)||(n.notes.delete(e.id),console.error(I),!1)})(n,t)&&M.publish(Q.NOTE_CREATED,{note:n,projectId:t})});const te=document.querySelector("#delete-project-window"),ne=document.querySelector("#delete-project-name"),re=document.querySelector("#btn-confirm-project-deletion"),oe=document.querySelector("#delete-task-window"),ae=document.querySelector("#delete-task-name"),ie=document.querySelector("#btn-confirm-task-deletion"),se=document.querySelector("#delete-note-window"),ce=document.querySelector("#delete-note-name"),de=document.querySelector("#btn-confirm-note-deletion");function le(e,t,n,r,o){e.textContent=n(t),r.dataset.id=t,o.showModal()}function ue(e,t,n,r){const o=e.target.dataset.id;t(o)&&(n.close(),M.publish(r,o))}document.querySelector("#btn-cancel-project-deletion").addEventListener("click",()=>te.close()),re.addEventListener("click",e=>{ue(e,O,te,Q.PROJECT_DELETED)}),document.querySelector("#btn-cancel-task-deletion").addEventListener("click",()=>oe.close()),ie.addEventListener("click",e=>{ue(e,N,oe,Q.TASK_DELETED)}),document.querySelector("#btn-cancel-note-deletion").addEventListener("click",()=>se.close()),de.addEventListener("click",e=>{ue(e,R,se,Q.NOTE_DELETED)}),M.subscribe(Q.PROJECT_DELETE_REQUESTED,e=>{le(ne,e,L,re,te)}),M.subscribe(Q.TASK_DELETE_REQUESTED,e=>{le(ae,e,q,ie,oe)}),M.subscribe(Q.NOTE_DELETE_REQUESTED,e=>{le(ce,e,j,de,se)});const pe=document.querySelector("#edit-note-window"),me=document.querySelector("#edit-note-window form"),Ee=document.querySelector("#edit-note-project-name"),ge=document.querySelector("#edit-task-window"),fe=document.querySelector("#edit-task-window form"),he=document.querySelector("#edit-task-project-name");document.querySelector("#btn-cancel-note-edit").addEventListener("click",()=>pe.close()),me.addEventListener("submit",function(){const e=new FormData(me),t=me.dataset.id;(function(e,t,n){if(!_.has(C)||!t||!n)return!1;const r=_.get(C),o=structuredClone(r.notes.get(e)),a=_.get(C).notes.get(e);return!!a&&(a.title=t,a.content=n,!!D(r)||(a.title=o.title,a.description=o.description,console.error(I),!1))})(t,e.get("title"),e.get("description"))&&M.publish(Q.NOTE_EDITED,t)}),document.querySelector("#btn-cancel-task-edit").addEventListener("click",()=>ge.close()),fe.addEventListener("submit",function(){const e=new FormData(fe),t=fe.dataset.id;(function(e,t){if(!_.has(C)||!t)return!1;const n=_.get(C),r=structuredClone(n.tasks.get(e)),o=n.tasks.get(e);return!!o&&(o.title=t.title,o.description=t.description,o.dueDate=t.dueDate,o.priority=t.priority,o.trackable=t.trackable,!!D(n)||(o.title=r.title,o.description=r.description,o.dueDate=r.dueDate,o.priority=r.priority,o.trackable=r.trackable,console.error(I),!1))})(t,{title:e.get("title"),description:e.get("description"),dueDate:new Date(""+e.get("date")),priority:T.fromString(e.get("priority")),trackable:"on"===e.get("track")})&&M.publish(Q.TASK_EDITED,t)}),M.subscribe(Q.NOTE_EDIT_REQUESTED,e=>{const t=J(e);Ee.textContent=L(),me.title.value=t.title,me.description.value=t.content,me.dataset.id=e,pe.showModal()}),M.subscribe(Q.TASK_EDIT_REQUESTED,e=>{const t=K(e);he.textContent=L(),fe.title.value=t.title,fe.description.value=t.description,fe.date.value=t.dueDate.toISOString().split("T")[0],fe.priority.value=t.priority.name,fe.track.checked=t.trackable,fe.dataset.id=e,ge.showModal()});const ve=document.querySelector("#view-task-window"),be=document.querySelector("#view-task-title"),Te=document.querySelector("#view-task-description"),ye=document.querySelector("#view-task-date"),we=document.querySelector("#view-task-priority"),Se=document.querySelector("#view-task-track"),De=document.querySelector("#view-note-window"),ke=document.querySelector("#view-note-title"),xe=document.querySelector("#view-note-content");document.querySelector("#btn-close-task-view").addEventListener("click",()=>ve.close()),document.querySelector("#btn-close-note-view").addEventListener("click",()=>De.close()),M.subscribe(Q.TASK_VIEW_REQUESTED,e=>{const t=K(e);be.textContent=t.title,Te.textContent=t.description,ye.textContent=t.dueDate.toISOString().split("T")[0],we.textContent=t.priority.name,Se.textContent=t.trackable?"Yes":"No",ve.showModal()}),M.subscribe(Q.NOTE_VIEW_REQUESTED,e=>{const t=J(e);ke.textContent=t.title,xe.textContent=t.content,De.showModal()});class _e extends b{static VIEW_PROJECTS=new _e("View Projects","projects");static VIEW_Tasks=new _e("View Tasks","tasks");static VIEW_Notes=new _e("View Notes","notes");constructor(e,t){super(e),this.style=t}}class Ce extends b{static PRIORITY=new Ce("Priority",(e,t)=>e.priority.priorityLevel-t.priority.priorityLevel);static DUE_DATE=new Ce("Date",(e,t)=>e.dueDate-t.dueDate);static STATUS=new Ce("Status",(e,t)=>e.status.statusLevel-t.status.statusLevel);constructor(e,t){super(e),this.comparator=t}}class Ie extends b{static OPEN_PROJECT=new Ie("Open Project");static VIEW_TASK=new Ie("View Task");static VIEW_NOTE=new Ie("View Note");static DELETE_PROJECT=new Ie("Delete Project");static DELETE_TASK=new Ie("Delete Task");static DELETE_NOTE=new Ie("Delete Note");static CHANGE_TASK_STATUS=new Ie("Change Task Status");static EDIT_NOTE=new Ie("Edit Note");static EDIT_TASK=new Ie("Edit Task")}let Ae=5,Oe=1;function Ne(){const e=Oe-1>0;return e&&Oe--,e}function Re(){return Oe}const Le=n.p+"14a00cd8723416a2cd6a.svg",qe=n.p+"6ac01028010fc59cca5d.svg";class je extends b{static FINISHED=new je("Finished",e=>e.status===y.DONE);static UNFINISHED=new je("Unfinished",e=>e.status!==y.DONE);static OVERDUE=new je("Overdue",e=>{const t=new Date;t.setHours(0,0,0);const n=t.getTime();return e.status!==y.DONE&&e.dueDate.getTime()<n});constructor(e,t){super(e),this.predicate=t}}let Pe=_e.VIEW_PROJECTS;const Ue=document.querySelector("#projects-container"),Ve=document.querySelector("#projects-info h2"),We=document.querySelector("#btn-back"),Ke=document.querySelector("#tasks-ordering"),Je=document.querySelector("#btn-prev"),Me=document.querySelector("#btn-next"),Qe=document.querySelector("#curr-page"),Fe=document.querySelector("#total-items");function He(){let e,t;switch(Pe){case _e.VIEW_PROJECTS:e=U(),t=nt;break;case _e.VIEW_Tasks:e=V(),t=rt;break;case _e.VIEW_Notes:e=W(),t=ot}return{dataArray:e,displayFunction:t}}function ze(e){(Oe-1)*Ae<e.length||(Ne(),Qe.textContent=""+Re())}function Ge(){Oe=1,Qe.textContent=""+Re()}function $e(e){Pe===_e.VIEW_Tasks&&("INPUT"!==e.target.tagName&&"LABEL"!==e.target.tagName||(Ge(),rt(V())))}function Be(e){Pe=_e.fromString(e),Pe===_e.VIEW_Tasks?rt(V()):Pe===_e.VIEW_Notes&&ot(W())}function Ye(e,t,...n){for(const r of n)r.dataset.id=e,r.dataset.action=t.name}function Xe(e){const t=document.createElement("div"),n=document.createElement("h3"),r=document.createElement("button"),o=document.createElement("img"),a=document.createElement("div"),i=document.createElement("p"),s=document.createElement("p");return n.textContent=e.title,i.textContent="Tasks: "+e.tasks,s.textContent="Notes: "+e.notes,o.src=""+Le,o.dataset.action=Ie.DELETE_PROJECT.name,o.dataset.id=e.id,t.classList.add("project-card","card"),Ye(e.id,Ie.OPEN_PROJECT,t,n,a),r.appendChild(o),a.append(i,s),t.append(n,r,a),t}function Ze(e){const t=document.createElement("div"),n=document.createElement("h4"),r=document.createElement("select"),o=document.createElement("p"),a=document.createElement("div"),i=document.createElement("button"),s=document.createElement("button"),c=document.createElement("img"),d=document.createElement("img");for(const t of Object.values(y)){const n=document.createElement("option");n.value=t.name,n.textContent=t.name,t.name===e.status.name&&(n.selected=!0),r.appendChild(n)}return n.textContent=e.title,r.dataset.id=e.id,r.dataset.action=Ie.CHANGE_TASK_STATUS.name,o.textContent=e.dueDate.toLocaleDateString(),c.dataset.id=e.id,c.dataset.action=Ie.DELETE_TASK.name,c.src=""+Le,d.dataset.id=e.id,d.dataset.action=Ie.EDIT_TASK.name,d.src=""+qe,t.classList.add("task-card",e.priority.style,e.status.style,"card"),Ye(e.id,Ie.VIEW_TASK,t,n,o),i.appendChild(c),s.appendChild(d),a.append(i,s),t.append(n,r,o,a),t}function et(e){const t=document.createElement("div"),n=document.createElement("h3"),r=document.createElement("p"),o=document.createElement("div"),a=document.createElement("button"),i=document.createElement("button"),s=document.createElement("img"),c=document.createElement("img");return n.textContent=e.title,r.textContent=e.content,s.src=""+Le,s.dataset.id=e.id,s.dataset.action=Ie.DELETE_NOTE.name,c.src=""+qe,c.dataset.id=e.id,c.dataset.action=Ie.EDIT_NOTE.name,t.classList.add("note-card","card"),Ye(e.id,Ie.VIEW_NOTE,t,n,r),a.appendChild(s),i.appendChild(c),o.append(a,i),t.append(n,r,o),t}function tt(e,t){Fe.textContent=""+e.length;const n=function(e){const t=[],n=(Oe-1)*Ae,r=n+Ae,o=r>e.length?e.length:r;for(let r=n;r<o;r++)t.push(e[r]);return t}(e),r=document.createDocumentFragment();for(const e of n)r.appendChild(t(e));Ue.setAttribute("class",Pe.style),Ue.replaceChildren(r)}function nt(e){e&&tt(e,Xe)}function rt(e){if(!e)return;const t=function(){const e=document.querySelector('#sorting-options input[name="sorting-mode"]:checked'),t=Ke.checked;try{return{sorter:Ce.fromString(e.value),ascending:t}}catch(e){return null}}();t&&(e=function(e,t,n){if(!t)return null;if(!e)return null;const r=[...e].sort(t.comparator);return n?r:r.reverse()}(e,t.sorter,t.ascending));const n=function(){const e=document.querySelector('#filtering-options input[name="filtering-mode"]:checked');try{return je.fromString(e.value)}catch(e){return null}}();var r,o;n&&(o=n,e=(r=e)&&o?[...r].filter(o.predicate):null),tt(e,Ze)}function ot(e){e&&tt(e,et)}Ue.addEventListener("click",e=>{const t=e.target.dataset.id;if(t)switch(Ie.fromString(e.target.dataset.action)){case Ie.OPEN_PROJECT:!function(e){!function(e){_.has(e)&&(C=e)}(e);const t=document.querySelector('#items-options input[name="display-mode"]:checked');Ge(),Be(t.value),Ve.textContent=L(),We.disabled=!1}(t);break;case Ie.VIEW_TASK:M.publish(Q.TASK_VIEW_REQUESTED,t);break;case Ie.VIEW_NOTE:M.publish(Q.NOTE_VIEW_REQUESTED,t);break;case Ie.DELETE_PROJECT:M.publish(Q.PROJECT_DELETE_REQUESTED,t);break;case Ie.DELETE_TASK:M.publish(Q.TASK_DELETE_REQUESTED,t);break;case Ie.DELETE_NOTE:M.publish(Q.NOTE_DELETE_REQUESTED,t);break;case Ie.CHANGE_TASK_STATUS:!function(e,t){if(Pe!==_e.VIEW_Tasks)return;(function(e,t){if(!_.has(C)||!t)return!1;const n=_.get(C),r=n.tasks.get(e),o=r.status;return!!r&&(r.status=t,!!D(n)||(r.status=o,console.error(I),!1))})(t,y.fromString(e))&&rt(V())}(e.target.value,t);break;case Ie.EDIT_NOTE:M.publish(Q.NOTE_EDIT_REQUESTED,t);break;case Ie.EDIT_TASK:M.publish(Q.TASK_EDIT_REQUESTED,t)}}),document.querySelector("#items-options").addEventListener("click",function(e){if(Pe===_e.VIEW_PROJECTS)return;if("INPUT"!==e.target.tagName&&"LABEL"!==e.target.tagName)return;const t=document.querySelector('#items-options input[name="display-mode"]:checked');Ge(),Be(t.value)}),document.querySelector("#sorting-options").addEventListener("click",$e),document.querySelector("#filtering-options").addEventListener("click",$e),document.querySelector("#items-select").addEventListener("change",function(e){var t;(t=Number(e.target.value))>15?t=15:t<1&&(t=1),Ae=t;const n=He();Ge(),n.displayFunction(n.dataArray)}),We.addEventListener("click",()=>{C=null,Ge(),Pe=_e.VIEW_PROJECTS,nt(U()),Ve.textContent="All Projects",We.disabled=!0}),Je.addEventListener("click",()=>{if(!Ne())return;const e=He();e.displayFunction(e.dataArray),Qe.textContent=""+Re()}),Me.addEventListener("click",()=>{const e=He();(function(e){const t=Oe*Ae<e.length;return t&&Oe++,t})(e.dataArray)&&(e.displayFunction(e.dataArray),Qe.textContent=""+Re())}),M.subscribe(Q.PROJECT_CREATED,()=>{Pe===_e.VIEW_PROJECTS&&nt(U())}),M.subscribe(Q.TASK_CREATED,e=>{Pe===_e.VIEW_PROJECTS?nt(U()):Pe===_e.VIEW_Tasks&&e.projectId===P()&&rt(V())}),M.subscribe(Q.NOTE_CREATED,e=>{Pe===_e.VIEW_PROJECTS?nt(U()):Pe===_e.VIEW_Notes&&e.projectId===P()&&ot(W())}),M.subscribe(Q.PROJECT_DELETED,()=>{if(Pe!==_e.VIEW_PROJECTS)return;const e=U();ze(e),nt(e)}),M.subscribe(Q.TASK_DELETED,()=>{Pe===_e.VIEW_Tasks&&(ze(V()),rt(V()))}),M.subscribe(Q.NOTE_DELETED,()=>{if(Pe!==_e.VIEW_Notes)return;const e=W();ze(e),ot(e)}),M.subscribe(Q.NOTE_EDITED,()=>{Pe===_e.VIEW_Notes&&ot(W())}),M.subscribe(Q.TASK_EDITED,()=>{Pe===_e.VIEW_Tasks&&rt(V())}),document.addEventListener("DOMContentLoaded",function(){const e=k();e?function(e){if(e)for(const t of e)A(t)}(e):0===_.size&&A(x("Default")),nt(U())})})();